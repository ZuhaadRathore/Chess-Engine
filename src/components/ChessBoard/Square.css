.square {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  user-select: none;
  transition: none;
  touch-action: manipulation;
  border: 1px solid rgba(0, 0, 0, 0.2);
  /* Handdrawn effect using multiple box shadows */
  box-shadow:
    inset 1px 1px 0 rgba(0, 0, 0, 0.1),
    inset -1px -1px 0 rgba(255, 255, 255, 0.1),
    0 0 0 1px rgba(0, 0, 0, 0.05);
  filter: contrast(1.05) brightness(0.98);
}

/* Square colors - Brutalist concrete tones */
.square-light {
  background-color: #d8d4ce;
  background-image:
    linear-gradient(45deg, transparent 48%, rgba(0, 0, 0, 0.02) 49%, rgba(0, 0, 0, 0.02) 51%, transparent 52%),
    linear-gradient(-45deg, transparent 48%, rgba(0, 0, 0, 0.02) 49%, rgba(0, 0, 0, 0.02) 51%, transparent 52%);
  background-size: 8px 8px;
}

.square-dark {
  background-color: #605850;
  background-image:
    linear-gradient(45deg, transparent 48%, rgba(0, 0, 0, 0.08) 49%, rgba(0, 0, 0, 0.08) 51%, transparent 52%),
    linear-gradient(-45deg, transparent 48%, rgba(0, 0, 0, 0.08) 49%, rgba(0, 0, 0, 0.08) 51%, transparent 52%);
  background-size: 8px 8px;
}

/* State classes - Brutalist bold highlights */
.square-selected {
  box-shadow:
    inset 0 0 0 5px #1a1a1a,
    inset 0 0 0 7px #e8e5e0,
    0 0 0 2px #1a1a1a;
  filter: contrast(1.15) brightness(1.05);
}

.square-highlighted {
  /* Rely on move indicators for highlighting */
}

.square-last-move {
  outline: 3px solid #1a1a1a;
  outline-offset: -3px;
  position: relative;
}

.square-last-move::after {
  content: '';
  position: absolute;
  top: 3px;
  left: 3px;
  right: 3px;
  bottom: 3px;
  border: 2px dashed rgba(26, 26, 26, 0.4);
  pointer-events: none;
}

.square-disabled {
  cursor: not-allowed;
  opacity: 0.6;
}

/* Hover effect - Brutalist raw */
.square:hover:not(.square-disabled) {
  filter: contrast(1.1) brightness(1.05);
  box-shadow:
    inset 2px 2px 0 rgba(0, 0, 0, 0.15),
    inset -2px -2px 0 rgba(255, 255, 255, 0.15),
    0 0 0 2px rgba(0, 0, 0, 0.1);
}

/* Active state for touch feedback */
.square:active:not(.square-disabled) {
  transform: translate(1px, 1px);
  box-shadow: inset 2px 2px 4px rgba(0, 0, 0, 0.3);
}

/* Focus styles */
.square:focus-visible {
  outline: 2px solid var(--primary-color);
  outline-offset: -2px;
  z-index: 1;
}

/* Move indicators - Handdrawn style */
.move-indicator {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 30%;
  height: 30%;
  border-radius: 0;
  background-color: transparent;
  border: 3px solid rgba(26, 26, 26, 0.6);
  pointer-events: none;
  /* Rough handdrawn effect */
  box-shadow:
    inset 1px 1px 2px rgba(0, 0, 0, 0.2),
    1px 1px 0 rgba(0, 0, 0, 0.1);
  transform: translate(-50%, -50%) rotate(45deg);
}

.capture-indicator {
  position: absolute;
  top: 8%;
  left: 8%;
  right: 8%;
  bottom: 8%;
  border: 5px solid #8b0000;
  border-radius: 0;
  pointer-events: none;
  /* Bold X shape for captures */
  background:
    linear-gradient(45deg, transparent 45%, #8b0000 47%, #8b0000 53%, transparent 55%),
    linear-gradient(-45deg, transparent 45%, #8b0000 47%, #8b0000 53%, transparent 55%);
  box-shadow:
    inset 0 0 8px rgba(139, 0, 0, 0.3),
    2px 2px 0 rgba(0, 0, 0, 0.2);
}

/* Mobile adjustments */
@media (max-width: 768px) {
  .square {
    min-width: 48px;
    min-height: 48px;
    padding: 2px;
  }

  .move-indicator {
    width: 35%;
    height: 35%;
    transition: transform 0.2s;
  }

  .capture-indicator {
    border-width: 4px;
  }
}
